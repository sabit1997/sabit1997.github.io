{"componentChunkName":"component---src-templates-blog-post-js","path":"/http/204-status/","result":{"data":{"site":{"siteMetadata":{"title":"YEJILOG","author":"YEJI","siteUrl":"https://sabit1997.github.io","comment":{"disqusShortName":"","utterances":"sabit1997/sabit1997.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"88357a40-7a4c-5594-9e71-9bfc6fca4564","excerpt":"1. 문제 상황 로 서버와 통신이 성공했는데 화면에서 바로 적용이 되지 않는 현상을 발견했다. 이 때 status를 살펴보니 였다. 204 status는 어떤 상태를 말하는걸까? 204 No Content 서버가 요청을 성공적으로 수행하였으며 응답 콘텐츠에 보낼 추가 콘텐츠가 없음을 나타낸다. , 에 응답할 때 서버가 대체/업데이트된 리소스를 반환하거나, 에 응답할 때 일반적으로 삭제 후 반환할 것이 없기 때문에 사용된다고 하였다. 아, 삭제 후에 반환할 것이 없어서 204 status…","html":"<h2 id=\"1-문제-상황\" style=\"position:relative;\"><a href=\"#1-%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\"1 문제 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>1. 문제 상황</strong></h2>\n<p><code class=\"language-text\">axios.delete</code>로 서버와 통신이 성공했는데 화면에서 바로 적용이 되지 않는 현상을 발견했다.</p>\n<p>이 때 status를 살펴보니 <code class=\"language-text\">204 status</code>였다.</p>\n<p><strong>204 status는 어떤 상태를 말하는걸까?</strong></p>\n<blockquote>\n<p>204 No Content</p>\n</blockquote>\n<p>서버가 요청을 성공적으로 수행하였으며 <strong>응답 콘텐츠에 보낼 추가 콘텐츠가 없음</strong>을 나타낸다.</p>\n<p><code class=\"language-text\">PUT</code>, <code class=\"language-text\">PATCH</code>에 응답할 때 서버가 대체/업데이트된 리소스를 반환하거나, <code class=\"language-text\">DELETE</code>에 응답할 때 일반적으로 삭제 후 반환할 것이 없기 때문에 사용된다고 하였다.</p>\n<p><strong>아, 삭제 후에 반환할 것이 없어서 204 status가 떴구나 이해할 수 있었다.</strong></p>\n<p>사실 <code class=\"language-text\">PUT</code>과 <code class=\"language-text\">PATCH</code>를 사용했을 때 <code class=\"language-text\">204</code> 때문에 문제를 겪은 적이 없어 그냥 지나간 것이 아닌가 싶다.</p>\n<p>내가 주로 사용했던 상황은 수정 페이지(상품 수정 등)에서 수정을 하고 난 뒤 페이지를 이동했기 때문에</p>\n<p>그 페이지에서 다시 <code class=\"language-text\">GET</code>요청을 실행해 컨텐츠를 불러왔기 때문이다.</p>\n<p>하지만 이번에 <code class=\"language-text\">DELETE</code>요청을 보내는</p>\n<p><img src=\"https://github.com/sabit1997/sabit1997.github.io/assets/100986977/6f4ae3a9-970d-4e51-a021-eb8f2675269a\" alt=\"image\"></p>\n<p>데이터를 불러오는 페이지에서 삭제 또한 하기 때문에 <code class=\"language-text\">204 status</code>에 생각해 볼 수 있게 되었다.</p>\n<p>새로 고침을 하면 제대로 삭제된 상태가 반영이 되었으나 내가 원하는 건 그게 아니었으니까!</p>\n<h2 id=\"2-해결-방법\" style=\"position:relative;\"><a href=\"#2-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\"2 해결 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>2. 해결 방법</strong></h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 상품 삭제</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">deleteProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  instance\n    <span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/cart/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cartItemId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">204</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setCartData</span><span class=\"token punctuation\">(</span>cartData<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span>cart_item_id <span class=\"token operator\">!==</span> cartItemId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">setDeleteModal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그래서 <code class=\"language-text\">204 status</code>일 때 상품 데이터를 저장하는 <code class=\"language-text\">useState</code>에 삭제한 상품을 제외한 상품들을 저장해줘 해결했다.</p>\n<p><strong>(+ 그냥 추가적으로 궁금해서 정리해 놓은 것)</strong></p>\n<p>204 status에 관해서 알아볼 때 <code class=\"language-text\">Cacheable</code> 이라는 키워드가 있었는데</p>\n<p>캐시할 수 있는  HTTP 응답으로 나중에 검색하고 사용하기 위해 저장하여 새 요청을 서버에 저장한다고 한다.</p>\n<p>모든 HTTP 응답을 캐시할 수 있는 것은 아니고 캐시할 HTTP 응답에 대한 제약 조건이 있다고 한다.</p>\n<ul>\n<li><code class=\"language-text\">GET</code>, <code class=\"language-text\">HEAD</code> 메서드는 요청에 사용된 메서드 그 자체로 캐시 가능</li>\n<li><code class=\"language-text\">POST</code> 또는 <code class=\"language-text\">PATCH</code> 요청에 대해서는 거의 구현되지 않음.</li>\n<li><code class=\"language-text\">PUT</code> 또는 <code class=\"language-text\">DELETE</code> 다른 메서드는 캐시 가능하지 않고 그 결과 역시 캐시할 수 없음.</li>\n<li>애플리케이션 캐싱에 의해 알려진 응답 상태 코드는 캐시 가능한 것으로 간주</li>\n<li>200, 203, 204, 206, 300, 301, 404, 405, 410, 414, 501 상태 코드는 캐싱 가능</li>\n<li>응답에는 <code class=\"language-text\">Cache-Control</code>과 같은 캐싱을 방지하는 특정 헤더가 있다.</li>\n</ul>\n<p>번역된 글이라서 이해하기 다소 어려운 감이 있다…</p>\n<p>캐싱은 주어진 리소스의 복사본을 저장하고 있다가 요청 시에 그것을 제공하는 기술이다.</p>\n<p>나중에 사용할 일이 있으면 더 알아봐야겠다. 지금은 사용할 일이 없어서 아예 와닿지가 않는다.</p>\n<br>\n<p><strong>참고</strong></p>\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_redirection\">https://en.wikipedia.org/wiki/List<em>of</em>HTTP<em>status</em>codes#3xx_redirection</a></p>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Caching\">https://developer.mozilla.org/ko/docs/Web/HTTP/Caching</a></p>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Glossary/cacheable\">https://developer.mozilla.org/ko/docs/Glossary/cacheable</a></p>","frontmatter":{"title":"204 status","date":"October 14, 2022"}}},"pageContext":{"slug":"/http/204-status/","previous":{"fields":{"slug":"/React&JS/useEffect/"},"frontmatter":{"title":"useEffect"}},"next":{"fields":{"slug":"/React&JS/Send-data-with-useNavigate/"},"frontmatter":{"title":"useNavigate로 데이터 보내기"}}}},"staticQueryHashes":["2486386679","3128451518"]}